{"version":3,"file":"TeamDialog.js","sources":["_js/TeamDialog.js"],"sourcesContent":["class TeamDialog {\n    constructor() {\n        this.initialized = false;\n        this.deleteMode  = false;\n        this.teamList    = muse('teamlist', {}); \n        this.subSearchRE = '';\n        this.dialogObj   = qs('#team');\n        this.memberSel   = qs('#team-members');\n        this.notifier    = qs('#tm-message');\n        this.ctaButtons  = {\n            'cancel'     : qs('#tmbtnCancel'),\n            'save'       : qs('#tmbtnSave'),\n            'done'       : qs('#tmbtnDone'), \n            'winX'       : qs('#team > h1 > button')\n        }\n        this.formFields  = qsa('input,hidden', this.dialogObj);\n        this.init();\n\n        this.performSubstitution = this.performSubstitution.bind(this);\n        \n    }\n    \n    init(){\n        if(this.initialized) return false;\n        \n        this.ctaButtons.winX.addEventListener('click',   () => this.closeDialog());\n        this.ctaButtons.cancel.addEventListener('click', () => this.closeDialog());\n        this.ctaButtons.save.addEventListener('click',   () => this.saveMember());\n        this.ctaButtons.done.addEventListener('click',   () => this.saveAndClose());\n        this.memberSel.addEventListener('change',        () => this.loadMember());\n        \n        this.syncMemberList();\n        \n        this.initialized = true;\n    }\n\n    closeDialog() {\n        setTimeout(()=>{\n            if(this.confirmDiscard()) {\n                this.toggle();\n                this.notifier.style = \"display:none\";\n\n            }\n        }, 250);\n    }\n\n    buildSubstitutionSearchRegEx() {\n        this.subSearchRE = new RegExp(`(${Object.keys(this.teamList).join('|')})`, 'gim');\n    }\n\n    autoLearn(emailToLearn, attemptToParse=true){\n        if(Object.keys(this.teamList).indexOf(emailToLearn) !== -1) return false;\n\n        let newPerson = {},\n            personData = {};\n        personData = {\n            'tmdata-email': emailToLearn\n        }\n        if(attemptToParse){\n            let parsedComponents = emailToLearn.replace(/@.+|\\d/g,'').match(/([A-Z])([A-Z][a-z]+)/);\n            if(parsedComponents != null && parsedComponents.length > 2){\n                personData['tmdata-fname'] = parsedComponents[1] || \"\";\n                personData['tmdata-lname'] = parsedComponents[2] || \"\";\n            }\n        }\n        newPerson[emailToLearn] = personData;\n        this.teamList = Object.assign(this.teamList, newPerson);\n        retain('teamlist',JSON.stringify(this.teamList));\n        this.syncMemberList();\n\n    }\n\n    performSubstitution(stringToSub){\n        const emailRE = /\\b[A-Z]{1,2}\\w+@\\w+\\.\\w{2,8}\\b/gim;\n        // console.log('performSubstitution(stringToSub) :',stringToSub);\n        let retVal = stringToSub.replace(this.subSearchRE, (s, m1)=>{\n            // console.log('m1 :', m1);\n            if(this.teamList[m1]){\n                let foundPerson = this.teamList[m1];\n                // console.log('foundPerson :', foundPerson);\n                return `${foundPerson['tmdata-fname']} ${foundPerson['tmdata-lname']}`;\n            }\n        });\n        \n        if(emailRE.test(retVal)){\n            if(window.autoLearn === true || confirm('Whoa there boss! Looks like you got some unknown emails there. You want I should try to learn them?')){\n                window.autoLearn = true;\n                let newEmails = retVal.match(emailRE);\n                newEmails.forEach(addr=>this.autoLearn(addr))\n            }\n        }\n        return retVal == null ? stringToSub : retVal;\n    }\n    \n    showMessage(message, color=[100,255,100], delay=1.75){\n        if(message == null) {\n            this.notifier.style=\"display:none;\";\n            return this.notifier.className = '';\n        }\n        this.notifier.innerText = message;\n        this.notifier.style = 'display:block; --bgcolor:rgba(' + color + ',0.5);' + '--delay:'+delay+'s';\n        this.notifier.className = 'show';\n        this.timer = setTimeout(()=>this.notifier.className = '', delay*1000);\n    }\n    \n    toggle(force) {\n        this.dialogObj.classList.toggle('visible', force);\n    }\n    \n    checkDirty() {\n        var flds = this.formFields, isDirty=false;\n        \n        flds.forEach(fld=>{\n            isDirty=(isDirty || fld.dataset.initial !== fld.value)\n        });\n        \n        return isDirty;\n    }\n    \n    confirmDiscard() {\n        if(this.checkDirty()){\n            this.showMessage('Unsaved changes will be lost!', [255,0,0], 10)\n            return confirm('Any unsaved changes will be lost with this action. Proceed?');\n        }\n        return true;\n    }\n    \n    saveMember(){\n        var flds = this.formFields, isDirty=false, someContent=false;\n        \n        flds.forEach(fld=>{\n            someContent = someContent || fld.value !== \"\";\n            if(typeof(fld.dataset.initial) === 'undefined' && this.memberSel.value !== \"\") fld.dataset.initial = fld.value;\n        });\n        if(this.memberSel.value !== \"\" && !someContent) {\n            if(!this.deleteMode){\n                // console.log(this.memberSel, this.teamList)\n                this.deleteMode = true;\n                return this.showMessage(\"Clicking Save or Done again will DELETE selected team member.\", [255,100,100], 20);\n            }else{\n                this.deleteMode = false;\n                // console.log(window.tl = this.teamList);\n                window.ms=this.memberSel;\n                let saveResult = delete this.teamList[this.memberSel.value.split('|')[0]];\n                // console.log(this.teamList);\n                if(saveResult === true){\n                    this.showMessage(\"Team member removed.\", [255,100,100]);\n                    this.timer = setTimeout(()=>this.memberSel.selectedIndex=0, 1000);\n                }else this.showMessage(\"Unable to remove team member! Alert @JJ and... release the hounds.\", [255,100,100]);\n            }\n        }else{\n            if(!this.checkDirty()) return this.showMessage(\"Um... nothing's actually been changed...\", [255,255,100])\n            flds=Object.fromEntries(flds.map(fld=>[fld.name,fld.value]))\n            if(flds['tmdata-email'] == null || flds['tmdata-email'] === '') return this.showMessage(\"Gotta at least gimme an e-mail, bucko....\", [255,100,100])\n            this.teamList[flds['tmdata-email']] = Object.fromEntries(Object.entries(flds).filter(o=>/tmdata/.test(o[0])));\n        }\n        retain('teamlist',JSON.stringify(this.teamList));\n        this.syncMemberList();\n        this.showMessage('Your changes were saved successfully.')\n        return true;\n    }\n    \n    saveAndClose(){\n        let saveResult = this.saveMember();\n        if(saveResult === true) this.timer = setTimeout(()=>this.toggle(), 1500);\n    }\n    \n    loadMember() {\n        let memSel = this.memberSel.value;\n        let flds=this.formFields;\n        flds=Object.fromEntries(flds.map(fld=>[fld.name,fld]))\n        // console.log(flds);\n        if(memSel !== '') (memSel=memSel.split('|'));\n        flds['tmdata-email'].dataset.initial = flds['tmdata-email'].value = memSel[0] || '';\n        flds['tmdata-fname'].dataset.initial = flds['tmdata-fname'].value = memSel[1] || '';\n        flds['tmdata-lname'].dataset.initial = flds['tmdata-lname'].value = memSel[2] || '';\n        this.showMessage('User data loaded.')\n        \n    }\n    \n    syncMemberList() {\n        this.formFields.forEach(fld=>fld.value = '')\n        let teamMembers = Object.entries(this.teamList);\n        let opStr = '';\n        teamMembers.sort();\n        teamMembers.forEach(member=>opStr += `<option value=\"${member[1]['tmdata-email']}|${member[1]['tmdata-fname']}|${member[1]['tmdata-lname']}\">${member[1]['tmdata-fname']} ${member[1]['tmdata-lname']} (${member[1]['tmdata-email']})</option>`);\n        qs('#tmOptions').innerHTML = opStr;\n\n        this.buildSubstitutionSearchRegEx();\n    }\n}\n\nconst teamDialog = new TeamDialog();\n\nqs('#launch').addEventListener('click', ()=>teamDialog.toggle())\n"],"names":["TeamDialog","constructor","initialized","deleteMode","teamList","muse","subSearchRE","dialogObj","qs","memberSel","notifier","ctaButtons","formFields","qsa","init","performSubstitution","bind","winX","addEventListener","closeDialog","cancel","save","saveMember","done","saveAndClose","loadMember","syncMemberList","setTimeout","confirmDiscard","toggle","style","buildSubstitutionSearchRegEx","RegExp","Object","keys","join","autoLearn","emailToLearn","attemptToParse","indexOf","newPerson","personData","parsedComponents","replace","match","length","assign","retain","JSON","stringify","stringToSub","emailRE","retVal","s","m1","foundPerson","test","window","confirm","newEmails","forEach","addr","showMessage","message","color","delay","className","innerText","timer","force","classList","checkDirty","flds","isDirty","fld","dataset","initial","value","someContent","ms","saveResult","split","selectedIndex","fromEntries","map","name","entries","filter","o","memSel","teamMembers","opStr","sort","member","innerHTML","teamDialog"],"mappings":"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"}